<div class="w3-container">
   <?= View::flash().View::Encab($controller_name, $page_action, $breadcrumb); ?>
</div>

<div class="w3-container w3-row">
  <div id="list_estudiantes" style="display: none"> <?= require('listEstudiantes.phtml') ?></div>
  <div id="form_new" style="display: none"> <?= require('newForm.phtml') ?> </div>
  <div id="form_edit" style="display: none"> <?= require('editForm.phtml') ?> </div>
  
  <div id="list_index">
    <?php
    try {
      require('indexHeader.phtml');
      
      $tabla = new OdaTable(showTotalRegs: true);
      //$tabla->setHead("Registro, *Estudiante, *Asunto, Acudiente, Docente");
      $tabla->setHead("Registro, *Estudiante, *Asunto, Docente");
      foreach($data as $key => $reg) {
        $estudiante = ucwords(OdaUtils::sanearString($reg->estudiante_nombre))." $reg->salon_nombre [$reg->salon_id]";
        $btn_edit = $reg->lnkEditRegistro($estudiante);
        $data_row = array(
          $reg.$btn_edit,
          $estudiante,
          OdaUtils::TIPO_REG_OBSERV[$reg->tipo_reg].'<br>' .OdaUtils::truncate($reg->asunto, 150),
          //$reg->acudiente.'<br>'.$reg->getFotoAcudiente(),
          $reg->director.'<br>'.$reg->getFotoDirector(),
        );
        $tabla->addRow(data: $data_row, attrs_td:['','class="searchTdata"','class="searchTdata"']);
      } //END-FOR
      echo $tabla;

      require('indexFooter.phtml');
    
    } catch (\Throwable $th) {
      OdaFlash::error($th);
    }
    ?>
  </div>
</div>
<div class="w3-panel">
   <?= View::Encab($controller_name, $page_action, $breadcrumb); ?>
   <?= View::flash(); ?>

   <div class="w3-row w3-section">
      <?=OdaForm::inputSearch();?>
   </div>
   
   <?php 
   try {

      $tabla = new OdaTable(theme: $theme, showTotalRegs: true);
      $tabla->setHead(
         data_head:    ['Actions', 'Estudiante', 'Cambiar Salon'], 
         attrs:         'class="w3-theme"', 
         arr_attrs_th: ['style="width:10%;"','style="width:60%;"','style="width:30%;"']
      );
      foreach($data as $key => $Estud) {
         $col1 = $Estud->salon_nombre .'<br/>' 
                .$Estud->is_active_f(true) .'<br/>'
                .OdaTags::img_estudiante($Estud->id, $Estud->sexo, $Estud->id,"class=\"w3-round\" style=\"width:100%;max-width:80px\"")
                .'<br/>'
                .$Estud->documento .'<br/>';
         $lnk_act_pago = '';
         if(!$Estud->isPazYSalvo()) {
            $lnk_act_pago = '<span class="w3-tag w3-green w3-round">' .Html::linkAction("actualizarPago/$Estud->id/", 'Poner al Dia '._Icons::solid('coins', 'w3-large')). '</span><br/>';
         }
         
         $nombre = $Estud;
         $col2 = 'Grado: '.$Estud->grado_nombre.'<br/>'.$nombre.$Estud->isNuevoIco().'<br>'
                 /*.Html::linkAction(
                    "estud_edit_activos/$Estud->id/", 
                    $nombre.'  '
                    ._Icons::solid('pen-to-square', 'w3-large'), 
                    "title=\"Click para MODIFICAR DATOS del ESTUDIANTE\"")
                    */
                 .$Estud->getCuentaInstit().'<br/>'
                 .$Estud->getCodigo().'<br/>'
                 .$Estud->getPagoPension().'<br/>'
                 .$lnk_act_pago.'<br/>'
                 .$Estud->linkOld_BoletinPeriodo();

         $col3 = $Estud->getSalonesCambiar('secretaria');
         $data=[$col1, $col2, $col3];
         $tabla->addRow(
            data: $data, 
            attrs_td: ['class="searchTdata w3-center"', 'class="searchTdata"']
         );
      }
      echo $tabla;


    } catch (\Throwable $th) {
      OdaLog::error($th);
      echo $th;
     }

   ?>   
</div>

<?= Tag::js("table_filter"); ?>